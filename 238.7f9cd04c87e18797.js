"use strict";(self.webpackChunkwe_cure=self.webpackChunkwe_cure||[]).push([[238],{4238:(S,m,l)=>{l.r(m),l.d(m,{ApprovalsModule:()=>U});var p=l(6019),s=l(7294),r=l(9133),u=l(6406),e=l(2383),d=l(8149),Z=l(2120),g=l(5258);function A(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.doctorid),e.xp6(1),e.Oqu("ar"==o.GetLanguage()?null==t?null:t.arabicname:null==t?null:t.englishname)}}function h(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.branchid),e.xp6(1),e.Oqu("ar"==o.GetLanguage()?null==t?null:t.arabicname:null==t?null:t.englishname)}}function v(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.specialityid),e.xp6(1),e.Oqu("ar"==o.GetLanguage()?null==t?null:t.arabicname:null==t?null:t.englishname)}}function _(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.patientid),e.xp6(1),e.Oqu(null==t?null:t.patientname)}}function f(n,i){1&n&&e._UZ(0,"hr")}function T(n,i){if(1&n&&(e.TgZ(0,"div",46),e.TgZ(1,"div"),e.TgZ(2,"h6",40),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"small"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(4);e.xp6(3),e.AsE("",t.medicine," (",t.approvalstatus,")"),e.xp6(2),e.Oqu("ar"==o.GetLanguage()?t.servicearabic:t.serviceenglish),e.xp6(2),e.AsE("",e.lcZ(8,5,"Quantity: "),"",t.quantity,"")}}function q(n,i){if(1&n&&(e.TgZ(0,"div",44),e.YNc(1,f,1,0,"hr",30),e.YNc(2,T,9,7,"div",45),e.qZA()),2&n){const t=i.$implicit,o=i.index;e.xp6(1),e.Q6J("ngIf",0!=o),e.xp6(1),e.Q6J("ngForOf",t.servicesapprovals)}}function b(n,i){if(1&n&&(e.TgZ(0,"div",35),e.TgZ(1,"div",36),e.TgZ(2,"div",37),e.TgZ(3,"div",38),e.TgZ(4,"div",39),e.TgZ(5,"h5",40),e._uU(6),e.qZA(),e.TgZ(7,"small",41),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"small"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"small"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.qZA(),e.TgZ(19,"div",42),e.YNc(20,q,3,2,"div",43),e.qZA(),e.qZA(),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(6),e.Oqu("ar"==o.GetLanguage()?t.value[0].doctorarabicname:t.value[0].doctorenglishname),e.xp6(2),e.Oqu("ar"==o.GetLanguage()?t.value[0].specialityarabicname:t.value[0].specialityenglishname),e.xp6(2),e.AsE("",e.lcZ(11,8,"Appointment Number: "),"",t.key,""),e.xp6(4),e.AsE("",e.lcZ(15,10,"Patient Name: "),"",t.value[0].patientname,""),e.xp6(3),e.hij(" ",e.xi3(18,12,o.HandleDate(t.value[0].appointmentdate),"d/M/yy, h:mm a")," "),e.xp6(3),e.Q6J("ngForOf",t.value)}}function x(n,i){if(1&n&&(e.TgZ(0,"section"),e.TgZ(1,"div",32),e.TgZ(2,"div",33),e.YNc(3,b,21,15,"div",34),e.ALo(4,"keyvalue"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.approvalRecordAppointmentGroped))}}function y(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th",53),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",53),e._uU(7),e.qZA(),e.TgZ(8,"td",53),e._uU(9),e.qZA(),e.TgZ(10,"td",53),e._uU(11),e.qZA(),e.TgZ(12,"td",53),e._uU(13),e.qZA(),e.TgZ(14,"td",53),e._uU(15),e.qZA(),e.qZA()),2&n){const t=i.$implicit,o=e.oxw().$implicit,a=e.oxw(2);e.xp6(2),e.Oqu("ar"==a.GetLanguage()?t.servicearabic:t.serviceenglish),e.xp6(2),e.Oqu(e.xi3(5,7,a.HandleDate(o.appointmentdate),"d/M/yy, h:mm a")),e.xp6(3),e.Oqu("ar"==a.GetLanguage()?o.doctorarabicname:o.doctorenglishname),e.xp6(2),e.Oqu("ar"==a.GetLanguage()?o.specialityarabicname:o.specialityenglishname),e.xp6(2),e.Oqu(o.patientname),e.xp6(2),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.approvalstatus)}}function C(n,i){if(1&n&&(e.ynx(0),e.YNc(1,y,16,10,"tr",52),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t.servicesapprovals)}}function F(n,i){if(1&n&&(e.TgZ(0,"section"),e.TgZ(1,"div",32),e.TgZ(2,"div",33),e.TgZ(3,"div",47),e.TgZ(4,"div",48),e.TgZ(5,"table",49),e.TgZ(6,"thead"),e.TgZ(7,"tr"),e.TgZ(8,"th",50),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th",50),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th",50),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",50),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"th",50),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th",50),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"th",50),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._UZ(29,"th",51),e.qZA(),e.qZA(),e.TgZ(30,"tbody"),e.YNc(31,C,2,1,"ng-container",52),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,8,"Services")),e.xp6(3),e.Oqu(e.lcZ(13,10,"Date / Time")),e.xp6(3),e.Oqu(e.lcZ(16,12,"Doctor")),e.xp6(3),e.Oqu(e.lcZ(19,14,"Speciality")),e.xp6(3),e.Oqu(e.lcZ(22,16,"Patient")),e.xp6(3),e.Oqu(e.lcZ(25,18,"Quantity")),e.xp6(3),e.Oqu(e.lcZ(28,20,"Status ")),e.xp6(4),e.Q6J("ngForOf",t.approvalRecordFilterd)}}const O=[{path:"",component:(()=>{class n{constructor(t,o,a,c,N){this.translate=t,this._fb=o,this._apiService=a,this._auth=c,this._UserDataService=N,this.approvalRecord=[],this.approvalRecordFilterd=[],this.approvalRecordAppointmentGroped=[],this.viewMode="ALL",this.allBranches=[],this.allDoctors=[],this.allSpeciality=[],this.allFamilymember=[],this.filterBody={},this._UserDataService.userData$.subscribe(w=>{this.userData=w})}ngOnInit(){this.SearchForm=this.BuildForm(this.SearchForm),this.GetApprovalRecord(),this.GetDoctors(),this.GetBranches(),this.GetSpecialties(),this.GetFamilyMember()}BuildForm(t){return this._fb.group({appointmentDate:new r.NI("",[]),pmemberflag:new r.NI("",[]),pbranch:new r.NI("",[]),pspecialityid:new r.NI("",[]),pdoctor:new r.NI("",[])})}GetApprovalRecord(){this._apiService.Post("medicalrecords/servicesapprovalsbyappointment",this.filterBody).subscribe(t=>{"no"==t.Header[0].Authorization&&this._auth.reloagin(),this.approvalRecord=t.medicationsdata,this.approvalRecordFilterd=t.servicesapprovalsdata,this.GroupRecord()})}GroupRecord(){this.approvalRecordAppointmentGroped=this.approvalRecordFilterd.reduce(function(t,o){return(t[o.appointmentno]=t[o.appointmentno]||[]).push(o),t},{})}GetBranches(){this._apiService.Post("branches",{}).subscribe(t=>{"no"==t.Header[0].Authorization&&this._auth.reloagin(),this.allBranches=t.branchesdata})}GetSpecialties(){this._apiService.Post("specialties",{}).subscribe(t=>{"no"==t.Header[0].Authorization&&this._auth.reloagin(),this.allSpeciality=t.specialitiesdata})}GetDoctors(){this._apiService.Post("doctors",{}).subscribe(t=>{"no"==t.Header[0].Authorization&&this._auth.reloagin(),this.allDoctors=t.doctorsdata})}GetFamilyMember(){this._apiService.Post("familymembers",{}).subscribe(t=>{"no"==t.Header[0].Authorization&&this._auth.reloagin(),this.allFamilymember=t.familymembersdata})}GetFamilyMemberNameById(t){let o="",a=o=this.allFamilymember.find(c=>c.patientid==t);return this.userData.patientid==t?o=this.userData.patientname:a&&(o=a.patientname),o}FilterVisit(t,o){this.filterBody[t]=this.GetControlValue(o),this.GetApprovalRecord()}FilterVisitbyMe(){this.filterBody.pmemberflag=this.userData.patientid,this.GetApprovalRecord()}FilterDoctors(t){let o=t.target.value;this.approvalRecordFilterd=this.approvalRecord.filter(a=>-1!=a.doctorarabicname.indexOf(o)||-1!=a.doctorenglishname.indexOf(o)),this.GroupRecord()}GetControlValue(t){return"appointmentDate"==t?new Date(this.SearchForm.get(t).value):this.SearchForm.get(t).value}ResetFilters(){this.SearchForm.get("appointmentDate").setValue(""),this.SearchForm.get("pmemberflag").setValue(""),this.SearchForm.get("pbranch").setValue(""),this.SearchForm.get("pspecialityid").setValue(""),this.SearchForm.get("pdoctor").setValue(""),this.filterBody={},this.GetApprovalRecord()}DownloadRecord(t){}ChangeView(){this.viewMode="ALL"==this.viewMode?"APPOINTMENT":"ALL"}HandleDate(t){return t?t.split("T")[0]:""}GetLanguage(){return"ar"==this.translate.currentLang?"ar":"en"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.sK),e.Y36(r.qu),e.Y36(d.s),e.Y36(Z.u),e.Y36(g.Mn))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-approvals-component"]],decls:81,vars:47,consts:[[1,"section"],[1,"container"],[1,"container-fluid"],[1,"layout-specing"],[1,"d-md-flex","justify-content-between","align-items-center"],["id","bookroom",1,"mb-2"],[1,"row","justify-content-center"],[1,"col-lg-12","p-0"],[1,"p-4","shadow","bg-white","rounded"],[1,"d-flex","justify-content-between"],[1,"mb-3"],[1,"form-check","form-switch"],["type","checkbox","id","viewType",1,"form-check-input",3,"checked","change"],["for","viewType",1,"form-check-label"],[3,"formGroup"],[1,"row","text-start"],[1,"col-lg-3","col-md-6","mt-3"],[1,"mb-3","mb-lg-0"],[1,"form-label"],["placeholder","MM/DD/YYYY","onfocus","(this.type='date')","onblur","(this.type='text')","formControlName","appointmentDate",1,"form-control",3,"change"],["id","Sortbylist-Shop","formControlName","pdoctor",1,"form-control","form-select",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["id","Sortbylist-Shop","formControlName","pbranch",1,"form-control","form-select",3,"change"],["id","Sortbylist-Shop","formControlName","pspecialityid",1,"form-control","form-select",3,"change"],["id","Sortbylist-Shop","formControlName","pmemberflag",1,"form-control","form-select",3,"change"],[1,"col-lg-3","col-md-6","d-flex"],[1,"mb-3","mb-lg-0","w-100","d-flex","align-items-end"],[1,"d-grid","w-100"],[1,"btn","btn-outline-primary",3,"click"],[4,"ngIf"],[3,"value"],[1,"container","mt-lg-3"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"rounded","shadow","mt-4"],[1,"p-4","d-flex","border-bottom"],[1,"cardHeader"],[1,"d-flex"],[1,"mb-0"],[1,"pt-1","mx-3"],[1,"p-4"],["class","pb-4",4,"ngFor","ngForOf"],[1,"pb-4"],["class","d-flex justify-content-between mb-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-4"],[1,"col-12","mt-4"],[1,"table-responsive","shadow","rounded"],[1,"table","table-center","bg-white","mb-0"],[1,"text-center","border-bottom","p-3"],[1,"text-end","border-bottom","p-3"],[4,"ngFor","ngForOf"],[1,"text-center","p-3"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"div",4),e.TgZ(5,"section",5),e.TgZ(6,"div",1),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.TgZ(10,"div",9),e.TgZ(11,"h4",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"input",12),e.NdJ("change",function(){return o.viewMode="APPOINTMENT"==o.viewMode?"ALL":"APPOINTMENT"}),e.qZA(),e.TgZ(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"form",14),e.TgZ(20,"div",15),e.TgZ(21,"div",16),e.TgZ(22,"div",17),e.TgZ(23,"label",18),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"input",19),e.NdJ("change",function(){return o.FilterVisit("pappointmentdate","appointmentDate")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",16),e.TgZ(28,"div",17),e.TgZ(29,"label",18),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"select",20),e.NdJ("change",function(){return o.FilterVisit("pdoctor","pdoctor")}),e.TgZ(33,"option",21),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,A,2,2,"option",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",16),e.TgZ(38,"div",17),e.TgZ(39,"label",18),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"select",23),e.NdJ("change",function(){return o.FilterVisit("pbranch","pbranch")}),e.TgZ(43,"option",21),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,h,2,2,"option",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",16),e.TgZ(48,"div",17),e.TgZ(49,"label",18),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"select",24),e.NdJ("change",function(){return o.FilterVisit("pspecialityid","pspecialityid")}),e.TgZ(53,"option",21),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,v,2,2,"option",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",16),e.TgZ(58,"div",17),e.TgZ(59,"label",18),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"select",25),e.NdJ("change",function(){return o.FilterVisit("pmemberflag","pmemberflag")}),e.TgZ(63,"option",21),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.YNc(66,_,2,2,"option",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",26),e.TgZ(68,"div",27),e.TgZ(69,"div",28),e.TgZ(70,"button",29),e.NdJ("click",function(){return o.FilterVisitbyMe()}),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",26),e.TgZ(74,"div",27),e.TgZ(75,"div",28),e.TgZ(76,"button",29),e.NdJ("click",function(){return o.ResetFilters()}),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(79,x,5,3,"section",30),e.YNc(80,F,32,22,"section",30),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(12),e.Oqu(e.lcZ(13,21,"Approvals Records")),e.xp6(3),e.Q6J("checked","APPOINTMENT"==o.viewMode),e.xp6(2),e.Oqu(e.lcZ(18,23,"Group by Appointment")),e.xp6(2),e.Q6J("formGroup",o.SearchForm),e.xp6(5),e.Oqu(e.lcZ(25,25,"Date ")),e.xp6(6),e.Oqu(e.lcZ(31,27,"Doctor ")),e.xp6(4),e.Oqu(e.lcZ(35,29,"Select Doctor")),e.xp6(2),e.Q6J("ngForOf",o.allDoctors),e.xp6(4),e.Oqu(e.lcZ(41,31,"Branch ")),e.xp6(4),e.Oqu(e.lcZ(45,33,"Select Branch")),e.xp6(2),e.Q6J("ngForOf",o.allBranches),e.xp6(4),e.Oqu(e.lcZ(51,35,"Specialties ")),e.xp6(4),e.Oqu(e.lcZ(55,37,"Select Specialtie")),e.xp6(2),e.Q6J("ngForOf",o.allSpeciality),e.xp6(4),e.Oqu(e.lcZ(61,39,"Family Member")),e.xp6(4),e.Oqu(e.lcZ(65,41,"Select Family Member")),e.xp6(2),e.Q6J("ngForOf",o.allFamilymember),e.xp6(5),e.Oqu(e.lcZ(72,43,"My Appointment")),e.xp6(6),e.Oqu(e.lcZ(78,45,"Reset")),e.xp6(2),e.Q6J("ngIf","APPOINTMENT"==o.viewMode),e.xp6(1),e.Q6J("ngIf","ALL"==o.viewMode))},directives:[r._Y,r.JL,r.F,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,p.sg,p.O5],pipes:[s.X$,p.Nd,p.uU],styles:[".border-bottom[_ngcontent-%COMP%]{justify-content:space-between;background-color:#129f4b;color:#fff}.downloadRecord[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.form-check[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(O)],u.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,L,s.aw,r.u5,r.UX]]}),n})()}}]);