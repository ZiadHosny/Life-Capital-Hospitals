"use strict";(self.webpackChunkwe_cure=self.webpackChunkwe_cure||[]).push([[260],{7260:(pt,u,s)=>{s.r(u),s.d(u,{AppointmentHistoryModule:()=>ot});var p=s(6019),m=s(7294),l=s(9133),c=s(6406),t=s(2383),Z=s(8149),g=s(2120),A=s(5427);function h(n,o){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.appointmentDetails.doctorphoto,t.LSH)}}function _(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.complaint)}}function v(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,_,3,1,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.complaints)}}function T(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Complaints")))}function q(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(2),t.AsE("",e.key+": ","",e.value,"")}}function f(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,q,3,2,"div",28),t.ALo(2,"keyvalue"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.appointmentDetails.vitalsigns[0]))}}function b(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Vitalsigns")))}function y(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.laboratoryservicearabic:e.laboratoryserviceenglish)}}function D(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,y,3,1,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.Laboratory)}}function x(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Laboratory")))}function O(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.surgeryarabicname:e.surgeryenglishname),t.xp6(2),t.Oqu(t.xi3(5,2,i.HandleDate(e.surgerydate),"d/M/yy, h:mm a"))}}function C(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,O,6,5,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.surgeries)}}function U(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Surgeries")))}function L(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.hij("","ar"==i.GetLanguage()?e.servicearabic:e.serviceenglish," "),t.xp6(2),t.Oqu(e.quantity)}}function w(n,o){if(1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"small"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.YNc(8,L,5,2,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"Services: ")," "),t.xp6(3),t.Oqu(t.lcZ(7,5,"Quantity")),t.xp6(2),t.Q6J("ngForOf",e.appointmentDetails.services)}}function S(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Services")))}function F(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.symptoms)}}function I(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,F,3,1,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.Symptoms)}}function J(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Symptoms")))}function N(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.radiologyservicearabic:e.radiologyserviceenglish)}}function H(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,N,3,1,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.Radiology)}}function Y(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"There is no Radiology")))}function Q(n,o){if(1&n&&(t.TgZ(0,"div",29),t.TgZ(1,"h6",23),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.medicine),t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.instructionsarabic:e.instructionsenglish)}}function M(n,o){if(1&n&&(t.TgZ(0,"div",27),t.YNc(1,Q,5,2,"div",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.appointmentDetails.medicines)}}function V(n,o){1&n&&(t.TgZ(0,"div",27),t.TgZ(1,"div",29),t.TgZ(2,"h6",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"h6",23),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"There is no Medicines")),t.xp6(3),t.Oqu(t.lcZ(7,4,"There is no Complaints")))}let G=(()=>{class n{constructor(e,i,a,r,d){this.translate=e,this._apiService=i,this._auth=a,this.router=r,this._sanitizer=d,this.appointmentId="",this.appointmentDetails={},this.allBranches=[]}ngOnInit(){const e=window.location.hash||window.location.pathname;this.appointmentId=e.split("/")[e.split("/").length-1],this.GetAppointmentHistory(),this.GetBranches()}GetAppointmentHistory(){this._apiService.Post("visits/getvisitdetails",{pappointmentid:this.appointmentId}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),0==e.appointmentdetailssdata.length&&this.router.navigateByUrl("/"),this.appointmentDetails=e.appointmentdetailssdata[0],this.appointmentDetails.doctorphoto&&this.HandleEncodedImages()})}DownloadAppointment(e){this._apiService.Post_Appointment("visits/printvisitdetails",{},e.visitid).subscribe(i=>{"no"==i.Header[0].Authorization&&this._auth.reloagin();let a=this.EncodeFile(i.visitdetailsreport[0].pdfmedicalprescriptionsreport);this.DownoladFile(a)})}EncodeFile(e){return"data:application/pdf;base64,"+e}DownoladFile(e){const i=document.createElement("a");i.href=e,i.download="Medications-Report.pdf",i.setAttribute("target","_blank"),i.click()}GetBranches(){this._apiService.Post("branches",{}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.allBranches=e.branchesdata})}GetBranchById(e){return 0==this.allBranches.length?{arabicname:"",englishname:""}:this.allBranches.find(i=>i.branchid==e)}HandleEncodedImages(){this.appointmentDetails.doctorphoto=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+this.appointmentDetails.doctorphoto)}HandleDate(e){return e?e.split("T")[0]:""}GetLanguage(){return"ar"==this.translate.currentLang?"ar":"en"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.sK),t.Y36(Z.s),t.Y36(g.u),t.Y36(c.F0),t.Y36(A.H7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-details"]],decls:106,vars:66,consts:[[1,"section","pb-3"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card","public-profile","border-0","rounded","shadow",2,"z-index","1"],[1,"card-body"],[1,"row","align-items-center"],["class","col-lg-2 col-md-3 text-md-start text-center",4,"ngIf"],[3,"ngClass"],[1,"row","align-items-end"],[1,"col-md-6","text-md-start","text-center","mt-4","mt-sm-0"],[1,"title","mb-0"],[1,"text-muted","h6","me-2"],[1,"title","mb-0","mt-3"],[1,"col-md-4","text-md-start","text-center","mt-4","mt-sm-0"],[1,"col-md-2","text-md-end","text-center"],[1,"downloadRecord",3,"click"],[1,"section","pt-3"],[1,"container","mt-lg-3"],[1,"col-md-6","col-12"],[1,"col-12"],[1,"rounded","shadow","mt-4"],[1,"p-4","border-bottom"],[1,"mb-0"],["class","p-4",4,"ngIf"],[1,"col-lg-2","col-md-3","text-md-start","text-center"],["alt","",1,"avatar","avatar-large","rounded-circle","shadow","d-block","mx-auto",3,"src"],[1,"p-4"],["class","d-flex justify-content-between pb-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","pb-4"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.YNc(7,h,2,1,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"div",10),t.TgZ(11,"h3",11),t._uU(12),t.qZA(),t.TgZ(13,"small",12),t._uU(14),t.qZA(),t.TgZ(15,"h6",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"h5",11),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"small",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"h6",13),t._uU(26),t.ALo(27,"date"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"h5",11),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"small",16),t.NdJ("click",function(){return i.DownloadAppointment(i.appointmentDetails)}),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"section",17),t.TgZ(36,"div",18),t.TgZ(37,"div",2),t.TgZ(38,"div",19),t.TgZ(39,"div",2),t.TgZ(40,"div",20),t.TgZ(41,"div",21),t.TgZ(42,"div",22),t.TgZ(43,"h5",23),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.YNc(46,v,2,1,"div",24),t.YNc(47,T,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(48,"div",20),t.TgZ(49,"div",21),t.TgZ(50,"div",22),t.TgZ(51,"h5",23),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.YNc(54,f,3,3,"div",24),t.YNc(55,b,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(56,"div",20),t.TgZ(57,"div",21),t.TgZ(58,"div",22),t.TgZ(59,"h5",23),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.qZA(),t.YNc(62,D,2,1,"div",24),t.YNc(63,x,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(64,"div",20),t.TgZ(65,"div",21),t.TgZ(66,"div",22),t.TgZ(67,"h5",23),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.YNc(70,C,2,1,"div",24),t.YNc(71,U,5,3,"div",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"div",19),t.TgZ(73,"div",2),t.TgZ(74,"div",20),t.TgZ(75,"div",21),t.TgZ(76,"div",22),t.TgZ(77,"h5",23),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.YNc(80,w,9,7,"div",24),t.YNc(81,S,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(82,"div",20),t.TgZ(83,"div",21),t.TgZ(84,"div",22),t.TgZ(85,"h5",23),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.qZA(),t.YNc(88,I,2,1,"div",24),t.YNc(89,J,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(90,"div",20),t.TgZ(91,"div",21),t.TgZ(92,"div",22),t.TgZ(93,"h5",23),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.qZA(),t.YNc(96,H,2,1,"div",24),t.YNc(97,Y,5,3,"div",24),t.qZA(),t.qZA(),t.TgZ(98,"div",20),t.TgZ(99,"div",21),t.TgZ(100,"div",22),t.TgZ(101,"h5",23),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.YNc(104,M,2,1,"div",24),t.YNc(105,V,8,6,"div",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",i.appointmentDetails.doctorphoto),t.xp6(1),t.Q6J("ngClass",i.appointmentDetails.doctorphoto?"col-lg-10 col-md-9":"col-md-12"),t.xp6(4),t.Oqu("ar"==i.GetLanguage()?i.appointmentDetails.doctorarabicname:i.appointmentDetails.doctorenglishname),t.xp6(2),t.Oqu("ar"==i.GetLanguage()?i.appointmentDetails.specialityarabicname:i.appointmentDetails.specialityenglishname),t.xp6(2),t.AsE("",t.lcZ(17,37,"Patient Name: "),"",i.appointmentDetails.patientname," "),t.xp6(4),t.AsE("",t.lcZ(21,39,"Appointment No. "),"",i.appointmentDetails.appointmentno," "),t.xp6(3),t.AsE("",t.lcZ(24,41,"Branch: "),"","ar"==i.GetLanguage()?i.GetBranchById(i.appointmentDetails.branchid).arabicname:i.GetBranchById(i.appointmentDetails.branchid).englishname,""),t.xp6(3),t.Oqu(t.xi3(27,43,i.HandleDate(null==i.appointmentDetails?null:i.appointmentDetails.appointmentdate),"d/M/yy, h:mm a")),t.xp6(4),t.Oqu(t.lcZ(31,46,"Status: Done")),t.xp6(3),t.Oqu(t.lcZ(34,48,"Download All")),t.xp6(11),t.Oqu(t.lcZ(45,50,"Complaints: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.complaints?null:i.appointmentDetails.complaints.length)>0&&null!=i.appointmentDetails.complaints[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.complaints||null==i.appointmentDetails.complaints[0]||0==(null==i.appointmentDetails.complaints?null:i.appointmentDetails.complaints.length)),t.xp6(5),t.Oqu(t.lcZ(53,52,"Vitalsigns: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.vitalsigns?null:i.appointmentDetails.vitalsigns.length)>0&&null!=i.appointmentDetails.vitalsigns[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.vitalsigns||null==i.appointmentDetails.vitalsigns[0]||0==(null==i.appointmentDetails.vitalsigns?null:i.appointmentDetails.vitalsigns.length)),t.xp6(5),t.Oqu(t.lcZ(61,54,"Laboratory Test: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.Laboratory?null:i.appointmentDetails.Laboratory.length)>0&&null!=i.appointmentDetails.Laboratory[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.Laboratory||null==i.appointmentDetails.Laboratory[0]||0==(null==i.appointmentDetails.Laboratory?null:i.appointmentDetails.Laboratory.length)),t.xp6(5),t.Oqu(t.lcZ(69,56,"Surgeries: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.surgeries?null:i.appointmentDetails.surgeries.length)>0&&null!=i.appointmentDetails.surgeries[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.surgeries||null==i.appointmentDetails.surgeries[0]||0==(null==i.appointmentDetails.surgeries?null:i.appointmentDetails.surgeries.length)),t.xp6(7),t.Oqu(t.lcZ(79,58,"Services: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.services?null:i.appointmentDetails.services.length)>0&&null!=i.appointmentDetails.services[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.services||null==i.appointmentDetails.services[0]||0==(null==i.appointmentDetails.services?null:i.appointmentDetails.services.length)),t.xp6(5),t.Oqu(t.lcZ(87,60,"Symptoms: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.Symptoms?null:i.appointmentDetails.Symptoms.length)>0&&null!=i.appointmentDetails.Symptoms[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.Symptoms||null==i.appointmentDetails.Symptoms[0]||0==(null==i.appointmentDetails.Symptoms?null:i.appointmentDetails.Symptoms.length)),t.xp6(5),t.Oqu(t.lcZ(95,62,"Radiology: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.Radiology?null:i.appointmentDetails.Radiology.length)>0&&null!=i.appointmentDetails.Radiology[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.Radiology||null==i.appointmentDetails.Radiology[0]||0==(null==i.appointmentDetails.Radiology?null:i.appointmentDetails.Radiology.length)),t.xp6(5),t.Oqu(t.lcZ(103,64,"Medicines: ")),t.xp6(2),t.Q6J("ngIf",(null==i.appointmentDetails.medicines?null:i.appointmentDetails.medicines.length)>0&&null!=i.appointmentDetails.medicines[0]),t.xp6(1),t.Q6J("ngIf",null==i.appointmentDetails.medicines||null==i.appointmentDetails.medicines[0]||0==(null==i.appointmentDetails.medicines?null:i.appointmentDetails.medicines.length)))},directives:[p.O5,p.mk,p.sg],pipes:[m.X$,p.uU,p.Nd],styles:[".downloadRecord[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]}),n})();var B=s(5258),k=s(6664);function R(n,o){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("value",e.branchid),t.xp6(1),t.Oqu("ar"==i.GetLanguage()?null==e?null:e.arabicname:null==e?null:e.englishname)}}function E(n,o){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("value",e.specialityid),t.xp6(1),t.Oqu("ar"==i.GetLanguage()?null==e?null:e.arabicname:null==e?null:e.englishname)}}function $(n,o){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(null==e?null:e.name)}}function z(n,o){if(1&n&&(t.TgZ(0,"option",48),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.patientid),t.xp6(1),t.Oqu(null==e?null:e.patientname)}}function P(n,o){1&n&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"td",49),t._UZ(3,"div",50),t.qZA(),t.qZA(),t.qZA())}function j(n,o){if(1&n&&t._UZ(0,"img",64),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.doctorphoto,t.LSH)}}function X(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw(2).SetSelectedVisit(a)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Cancel Appointment")))}function K(n,o){if(1&n&&(t.TgZ(0,"a",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("routerLink","/appointment-history/"+e.appointmentid),t.xp6(1),t.Oqu(t.lcZ(2,2,"Details"))}}function W(n,o){1&n&&(t.TgZ(0,"p",67),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Cancelled")))}function tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",52),t._uU(2),t.qZA(),t.TgZ(3,"th",53),t.TgZ(4,"a",54),t.TgZ(5,"div",55),t.YNc(6,j,1,1,"img",56),t.TgZ(7,"span",57),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td",52),t._uU(10),t.qZA(),t.TgZ(11,"td",52),t._uU(12),t.qZA(),t.TgZ(13,"td",52),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",52),t.TgZ(17,"small",58),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).DownloadRecord(r)}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"td",59),t.TgZ(21,"div",60),t.YNc(22,X,3,3,"a",61),t.YNc(23,K,3,4,"a",62),t.YNc(24,W,3,3,"p",63),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.appointmentno),t.xp6(4),t.Q6J("ngIf",e.doctorphoto),t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.doctorarabicname:e.doctorenglishname),t.xp6(2),t.Oqu("ar"==i.GetLanguage()?e.specialityarabicname:e.specialityenglishname),t.xp6(2),t.Oqu(e.patientname),t.xp6(2),t.Oqu(t.xi3(15,10,e.appointmentdate,"d/M/yy, h:mm a")),t.xp6(4),t.Oqu(t.lcZ(19,13,"Download")),t.xp6(4),t.Q6J("ngIf",1==e.statusid),t.xp6(1),t.Q6J("ngIf",2==e.statusid),t.xp6(1),t.Q6J("ngIf",4==e.statusid)}}function et(n,o){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,tt,25,15,"tr",51),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.allVisits)}}const it=[{path:"",component:(()=>{class n{constructor(e,i,a,r,d,at,lt){this.translate=e,this._fb=i,this._apiService=a,this._auth=r,this._sanitizer=d,this._userDataServices=at,this._showToastrService=lt,this.allVisits=[],this.allBranches=[],this.allSpecialities=[],this.allFamilyMember=[],this.allStatus=[{id:1,name:"Scheduled"},{id:2,name:"Done"},{id:4,name:"Cancelled"}],this.filterBody={pappointmentdate:null},this.loading=!0,this._userDataServices.userData$.subscribe(st=>{this.UserData=st})}ngOnInit(){this.SearchForm=this.BuildForm(this.SearchForm),this.GetAllVisits(),this.GetBranches(),this.GetFamilyMember()}BuildForm(e){return this._fb.group({branchId:new l.NI("",[]),specialtiesId:new l.NI("",[]),familyMembnerId:new l.NI("",[]),pstatusid:new l.NI("",[]),pappointmentdate:new l.NI("",[])})}GetAllVisits(){this._apiService.Post("visits/getvisits",this.filterBody).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.allVisits=e.visitsdata,this.HandleEncodedImages(),this.loading=!1})}CancelVisit(){this._apiService.Put("visits/cancelvisit",{visitid:this.selectedVisit.appointmentid}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.GetAllVisits(),this._showToastrService.showSuccess("Canceled",e.cancelvisit[0].response)})}GetBranches(){this._apiService.Post("branches",{}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.allBranches=e.branchesdata,this.CheckOneElement_Branch()})}CheckOneElement_Branch(){1==this.allBranches.length&&(this.SearchForm.get("branchId").setValue(this.allBranches[0].branchid),this.FilterVisit("pbranch","branchId"),this.GetSpecialties())}GetSpecialties(){this._apiService.Post("specialties",{branchid:this.SearchForm.get("branchId").value}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.allSpecialities=e.specialitiesdata,this.CheckOneElement_Specialtie()})}CheckOneElement_Specialtie(){1==this.allSpecialities.length&&(this.SearchForm.get("specialtiesId").setValue(this.allSpecialities[0].branchid),this.FilterVisit("pspecialityid","specialtiesId"))}GetFamilyMember(){this._apiService.Post("familymembers",{}).subscribe(e=>{"no"==e.Header[0].Authorization&&this._auth.reloagin(),this.allFamilyMember=e.familymembersdata})}FilterVisit(e,i){this.filterBody[e]=this.GetControlValue(i),this.GetAllVisits()}FilterVisitbyMe(){this.filterBody.pmemberflag=this.UserData.patientid,this.GetAllVisits()}GetControlValue(e){return"pappointmentdate"==e?new Date(this.SearchForm.get(e).value):this.SearchForm.get(e).value}SetSelectedVisit(e){this.selectedVisit=e}ResetFilters(){this.SearchForm.get("branchId").setValue(""),this.SearchForm.get("specialtiesId").setValue(""),this.SearchForm.get("familyMembnerId").setValue(""),this.SearchForm.get("pstatusid").setValue(""),this.SearchForm.get("pappointmentdate").setValue(""),this.filterBody={},this.GetAllVisits(),this.GetBranches()}HandleEncodedImages(){this.allVisits.map(e=>(e.doctorphoto&&(e.doctorphoto=this._sanitizer.bypassSecurityTrustResourceUrl("data:image/jpg;base64,"+e.doctorphoto)),e))}DownloadRecord(e){this._apiService.Post_Appointment("visits/printvisitdetails",{},e.appointmentid).subscribe(i=>{"no"==i.Header[0].Authorization&&this._auth.reloagin();let a=this.EncodeFile(i.visitdetailsreport[0].pdfmedicalprescriptionsreport);this.DownoladFile(a)})}EncodeFile(e){return"data:application/pdf;base64,"+e}DownoladFile(e){const i=document.createElement("a");i.target="_blank",i.href=e,i.download="Lab-Report.pdf",i.setAttribute("target","_blank"),i.click()}GetLanguage(){return"ar"==this.translate.currentLang?"ar":"en"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.sK),t.Y36(l.qu),t.Y36(Z.s),t.Y36(g.u),t.Y36(A.H7),t.Y36(B.Mn),t.Y36(k.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointments-history"]],decls:124,vars:71,consts:[[1,"section"],[1,"container"],[1,"container-fluid"],[1,"layout-specing"],[1,"d-md-flex","justify-content-between","align-items-center"],["id","bookroom",1,"mb-2"],[1,"row","justify-content-center"],[1,"col-lg-12","p-0"],[1,"p-4","shadow","bg-white","rounded"],[1,"mb-3"],[3,"formGroup"],[1,"row","text-start"],[1,"col-lg-3","col-md-6","mt-3"],[1,"mb-3","mb-lg-0"],[1,"form-label"],["id","Sortbylist-Shop","formControlName","branchId",1,"form-control","form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["id","Sortbylist-Shop","formControlName","specialtiesId",1,"form-control","form-select",3,"change"],["value","","disabled","","selected",""],["id","Sortbylist-Shop","formControlName","familyMembnerId",1,"form-control","form-select",3,"change"],["placeholder","MM/DD/YYYY","onfocus","(this.type='date')","onblur","(this.type='text')","formControlName","pappointmentdate",1,"form-control",3,"change"],[1,"col-lg-3","col-md-6","d-flex"],[1,"mb-3","mb-lg-0","w-100","d-flex","align-items-end"],[1,"d-grid","w-100"],[1,"btn","btn-outline-primary",3,"click"],[1,"row"],[1,"col-12","mt-4"],[1,"table-responsive","shadow","rounded"],[1,"table","table-center","bg-white","mb-0"],[1,"text-center","border-bottom","p-3",2,"min-width","200px"],[1,"border-bottom","p-3",2,"min-width","220px"],[1,"text-center","border-bottom","p-3"],[1,"text-center","border-bottom","p-3",2,"min-width","220px"],[1,"text-center","border-bottom","p-3",2,"min-width","150px"],[1,"text-end","border-bottom","p-3",2,"min-width","200px"],[4,"ngIf"],[1,"row","text-center"],["id","composemail","tabindex","-1","aria-labelledby","composemail-title","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","rounded","shadow","border-0"],[1,"modal-header","d-flex","border-bottom"],["id","composemail-title",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-4"],[1,"col-12"],["id","editor"],[1,"border-top","p-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn","btn-danger",3,"click"],[3,"value"],["colspan","100%",1,"loading-col"],["role","status",1,"spinner-border","text-primary"],[4,"ngFor","ngForOf"],[1,"text-center","p-3"],[1,"p-3"],[1,"text-primary"],[1,"d-flex","align-items-center"],["class","avatar avatar-ex-small rounded-circle shadow","alt","doctor-image",3,"src",4,"ngIf"],[1,"ms-2"],[1,"downloadRecord",3,"click"],[1,"text-end","p-3"],[1,"d-flex","justify-content-center"],["data-bs-toggle","modal","data-bs-target","#composemail","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary",3,"routerLink",4,"ngIf"],["class","m-0",4,"ngIf"],["alt","doctor-image",1,"avatar","avatar-ex-small","rounded-circle","shadow",3,"src"],["data-bs-toggle","modal","data-bs-target","#composemail",1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"m-0"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"div",4),t.TgZ(5,"section",5),t.TgZ(6,"div",1),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"form",8),t.TgZ(10,"h4",9),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"form",10),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.TgZ(17,"label",14),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"select",15),t.NdJ("change",function(){return i.FilterVisit("pbranch","branchId")}),t.YNc(21,R,2,2,"option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"label",14),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"select",17),t.NdJ("change",function(){return i.FilterVisit("pspecialityid","specialtiesId")}),t.TgZ(28,"option",18),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,E,2,2,"option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",12),t.TgZ(33,"div",13),t.TgZ(34,"label",14),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"select",19),t.NdJ("change",function(){return i.FilterVisit("pstatusid","familyMembnerId")}),t.TgZ(38,"option",18),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.YNc(41,$,2,2,"option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",12),t.TgZ(43,"div",13),t.TgZ(44,"label",14),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"input",20),t.NdJ("change",function(){return i.FilterVisit("pappointmentdate","pappointmentdate")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",12),t.TgZ(49,"div",13),t.TgZ(50,"label",14),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"select",19),t.NdJ("change",function(){return i.FilterVisit("pmemberflag","familyMembnerId")}),t.TgZ(54,"option",18),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.YNc(57,z,2,2,"option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",21),t.TgZ(59,"div",22),t.TgZ(60,"div",23),t.TgZ(61,"button",24),t.NdJ("click",function(){return i.FilterVisitbyMe()}),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",21),t.TgZ(65,"div",22),t.TgZ(66,"div",23),t.TgZ(67,"button",24),t.NdJ("click",function(){return i.ResetFilters()}),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",25),t.TgZ(71,"div",26),t.TgZ(72,"div",27),t.TgZ(73,"table",28),t.TgZ(74,"thead"),t.TgZ(75,"tr"),t.TgZ(76,"th",29),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th",30),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"th",29),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"th",31),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"th",32),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"th",33),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"th",34),t.qZA(),t.qZA(),t.YNc(95,P,4,0,"tbody",35),t.YNc(96,et,2,1,"tbody",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(97,"div",36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",37),t.TgZ(99,"div",38),t.TgZ(100,"div",39),t.TgZ(101,"div",40),t.TgZ(102,"h5",41),t._uU(103),t.ALo(104,"translate"),t.qZA(),t._UZ(105,"button",42),t.qZA(),t.TgZ(106,"div",43),t.TgZ(107,"div",44),t.TgZ(108,"div",45),t.TgZ(109,"p"),t._uU(110),t.ALo(111,"translate"),t._UZ(112,"br"),t._UZ(113,"br"),t.qZA(),t.qZA(),t.TgZ(114,"div",45),t.TgZ(115,"p"),t._uU(116),t.ALo(117,"translate"),t._UZ(118,"br"),t._UZ(119,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(120,"div",46),t.TgZ(121,"button",47),t.NdJ("click",function(){return i.CancelVisit()}),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.Oqu(t.lcZ(12,29,"Appointment History")),t.xp6(2),t.Q6J("formGroup",i.SearchForm),t.xp6(5),t.Oqu(t.lcZ(19,31,"Branch ")),t.xp6(3),t.Q6J("ngForOf",i.allBranches),t.xp6(4),t.Oqu(t.lcZ(26,33,"Specialties ")),t.xp6(4),t.Oqu(t.lcZ(30,35,"Select Specialtie")),t.xp6(2),t.Q6J("ngForOf",i.allSpecialities),t.xp6(4),t.Oqu(t.lcZ(36,37,"Status ")),t.xp6(4),t.Oqu(t.lcZ(40,39,"Select Status")),t.xp6(2),t.Q6J("ngForOf",i.allStatus),t.xp6(4),t.Oqu(t.lcZ(46,41,"Date ")),t.xp6(6),t.Oqu(t.lcZ(52,43,"Family Member")),t.xp6(4),t.Oqu(t.lcZ(56,45,"Select Family Member")),t.xp6(2),t.Q6J("ngForOf",i.allFamilyMember),t.xp6(5),t.Oqu(t.lcZ(63,47,"My Appointment")),t.xp6(6),t.Oqu(t.lcZ(69,49,"Reset")),t.xp6(9),t.Oqu(t.lcZ(78,51,"Appointment No. ")),t.xp6(3),t.Oqu(t.lcZ(81,53,"Doctor")),t.xp6(3),t.Oqu(t.lcZ(84,55,"Speciality")),t.xp6(3),t.Oqu(t.lcZ(87,57,"Patient")),t.xp6(3),t.Oqu(t.lcZ(90,59,"Date / Time")),t.xp6(3),t.Oqu(t.lcZ(93,61,"Download")),t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(7),t.Oqu(t.lcZ(104,63,"Cancel Appointment")),t.xp6(7),t.hij("",t.lcZ(111,65,"Are you sure you want to cancel this appointment?")," "),t.xp6(6),t.AsE("",t.lcZ(117,67,"Appointment No:")," ",null==i.selectedVisit?null:i.selectedVisit.appointmentid,""),t.xp6(6),t.Oqu(t.lcZ(123,69,"Cancel Appointment")))},directives:[l._Y,l.JL,l.F,l.sg,l.EJ,l.JJ,l.u,p.sg,l.YN,l.Kr,l.Fj,p.O5,c.yS],pipes:[m.X$,p.uU],styles:[".modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin:0}.border-bottom[_ngcontent-%COMP%]{justify-content:space-between}.downloadRecord[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}@media (min-width: 1400px){.container[_ngcontent-%COMP%]{max-width:1495px!important}}"]}),n})()},{path:":appointentId",component:G}];let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(it)],c.Bz]}),n})(),ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,nt,m.aw,l.u5,l.UX]]}),n})()}}]);